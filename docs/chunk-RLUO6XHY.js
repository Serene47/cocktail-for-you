import{a as z}from"./chunk-GGNGYQQ5.js";import{a as q,b as J,c as Q,d as W}from"./chunk-PCNE7SM6.js";import{c as k,e as h,f as Y}from"./chunk-2LEE3OVX.js";import{A as p,B as N,C as R,D as U,E as d,F as u,H,I as V,J as G,O as L,a as T,b as A,c as M,d as F,e as v,f as C,g as w,h as D,i as B,j as o,k as S,l as m,m as l,p as s,q as $,r as E,s as I,t as n,u as r,v as _,w as j,x as K,y as g,z as c}from"./chunk-VIFWXIG5.js";var x=class t{cocktailDataService=C(J);cocktailAdapterService=C(q);cocktailListError=new T;cocktailListError$=this.cocktailListError.asObservable();cocktailListLoading=new A(!1);cocktailListLoading$=this.cocktailListLoading.asObservable();processedCocktailList=new T;alcoholFilter=new A("");filteredCocktails$=F([this.processedCocktailList,this.alcoholFilter]).pipe(M(([i,e])=>e?i.filter(a=>a.alcoholicStatus===e):i));fetchAllCockTails(i=""){this.cocktailListLoading.next(!0),this.cocktailListError.next(null),this.cocktailDataService.getAll(i).subscribe({next:e=>{if(this.cocktailListLoading.next(!1),!e.drinks){this.cocktailListError.next(h);return}if(typeof e.drinks=="string"){this.cocktailListError.next(h);return}let a=e.drinks.map(f=>this.cocktailAdapterService.transformDTOToSummary(f));this.processedCocktailList.next(a)},error:()=>{this.cocktailListLoading.next(!1),this.cocktailListError.next(h)}})}updateAlcoholFilter(i){this.alcoholFilter.next(i)}resetState(){this.updateAlcoholFilter("")}static \u0275fac=function(e){return new(e||t)};static \u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})};var O=class t{alcoholicStatusDropdown=[{label:"No Preference",value:""},{label:"Alcoholic",value:k.ALCOHOLIC},{label:"Non alcoholic",value:k.NON_ALCOHOLIC}];static \u0275fac=function(e){return new(e||t)};static \u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})};var tt=(t,i)=>[t,i];function et(t,i){if(t&1&&(_(0,"app-badge",1),d(1,"uppercase")),t&2){let e=g();l("label",u(1,2,e.cocktail.alcoholicStatus))("variant",e.cocktail.badgeVariant)}}var b=class t{APP_ROUTES=z;COCKTAIL_ALCOHOL_STATUS=k;cocktail;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-cocktail-summary"]],inputs:{cocktail:"cocktail"},decls:11,vars:9,consts:[[1,"summary-card",3,"routerLink"],[1,"summary-card__status",3,"label","variant"],["loading","lazy",1,"summary-card__image",3,"src","alt"],[1,"summary-card__title"],[1,"summary-card__attribute","summary-attributes"],[1,"summary-attributes__item"]],template:function(e,a){e&1&&(n(0,"a",0),m(1,et,2,4,"app-badge",1),_(2,"img",2),n(3,"h4",3),c(4),r(),n(5,"ul",4)(6,"li",5)(7,"span"),c(8,"Category : "),r(),n(9,"b"),c(10),r()()()()),e&2&&(l("routerLink",U(6,tt,a.APP_ROUTES.COCKTAIL_DETAILS,a.cocktail.id)),o(),s(a.cocktail.badgeVariant?1:-1),o(),l("src",a.cocktail.thumbnail,B)("alt",a.cocktail.name),o(2),p(a.cocktail.name),o(6),p(a.cocktail.category))},dependencies:[L,G,W],styles:[".summary-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:1.25rem;text-decoration:none;color:#212121;background-color:beige;border:1px solid #CD7F32;border-radius:.25rem}.summary-card[_ngcontent-%COMP%]:hover, .summary-card[_ngcontent-%COMP%]:active, .summary-card[_ngcontent-%COMP%]:focus{outline:1px solid #8B0000;outline-offset:.25rem}.summary-card__status[_ngcontent-%COMP%]{align-self:flex-end}.summary-card__image[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;vertical-align:bottom}.summary-card__image[_ngcontent-%COMP%]:hover, .summary-card__image[_ngcontent-%COMP%]:active, .summary-card__image[_ngcontent-%COMP%]:focus{outline:none}.summary-card__title[_ngcontent-%COMP%]{color:#8b0000}.summary-attributes[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;list-style:none}"]})};var it=()=>["../../"],at=(t,i)=>i.id;function ot(t,i){if(t&1&&(n(0,"option",9),c(1),r()),t&2){let e=i.$implicit;l("value",e.value),o(),p(e.label)}}function nt(t,i){if(t&1&&_(0,"app-cocktail-summary",11),t&2){let e=i.$implicit;l("cocktail",e)}}function rt(t,i){if(t&1&&(n(0,"p",2),c(1),r()),t&2){let e=g(2);o(),p(e.COCKTAIL_LIST_EMPTY_MESSAGE)}}function ct(t,i){if(t&1){let e=j();n(0,"h4",4),c(1),d(2,"titlecase"),r(),n(3,"form",5)(4,"div",6)(5,"label",7),c(6,"Alcoholic status"),r(),n(7,"select",8),K("change",function(f){w(e);let y=g();return D(y.onAlcoholFilterChange(f))}),E(8,ot,2,2,"option",9,$),r()()(),n(10,"div",10),E(11,nt,1,1,"app-cocktail-summary",11,at),r(),m(13,rt,2,1,"p",2)}if(t&2){let e=i,a=g();o(),N("Here are your results for ",u(2,2,a.type)," !"),o(7),I(a.dropdownFacadeService.alcoholicStatusDropdown),o(3),I(e),o(2),s(e.length?-1:13)}}function lt(t,i){t&1&&(n(0,"p",2),c(1),r()),t&2&&(o(),p(i))}function mt(t,i){t&1&&_(0,"app-loader",3),t&2&&l("extraVerticalMargin",64)}var X=class t{dropdownFacadeService=C(O);cocktailFacadeService=C(x);COCKTAIL_LIST_EMPTY_MESSAGE=Y;type="";ngOnInit(){this.cocktailFacadeService.fetchAllCockTails(this.type)}onAlcoholFilterChange(i){i.target&&i.target instanceof HTMLSelectElement&&this.cocktailFacadeService.updateAlcoholFilter(i.target.value)}ngOnDestroy(){this.cocktailFacadeService.resetState()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-cocktail-list"]],inputs:{type:"type"},decls:9,vars:11,consts:[[1,"navigation"],[1,"navigation__item","button","button-link","button-outline",3,"routerLink"],[1,"excuse-text"],[3,"extraVerticalMargin"],[1,"results-title"],["novalidate","",1,"filters"],[1,"form-group"],["for","alcoholic-status",1,"form-label"],["name","alcoholic-status","id","alcoholic-status",1,"form-select",3,"change"],[3,"value"],[1,"cocktail-grid"],[3,"cocktail"]],template:function(e,a){if(e&1&&(n(0,"div",0)(1,"a",1),c(2,"Back"),r()(),m(3,ct,14,4),d(4,"async"),m(5,lt,2,1,"p",2),d(6,"async"),m(7,mt,1,1,"app-loader",3),d(8,"async")),e&2){let f,y;o(),l("routerLink",R(10,it)),o(2),s((f=u(4,4,a.cocktailFacadeService.filteredCocktails$))?3:-1,f),o(2),s((y=u(6,6,a.cocktailFacadeService.cocktailListError$))?5:-1,y),o(2),s(u(8,8,a.cocktailFacadeService.cocktailListLoading$)?7:-1)}},dependencies:[H,V,b,Q,L],styles:[".navigation[_ngcontent-%COMP%]{margin:1rem 0}.cocktail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1.5rem}@media (min-width: 600px){.cocktail-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 992px){.cocktail-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.filters[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1fr);gap:1rem;padding:1rem;margin-bottom:2rem;background-color:#f4f4f4;border-radius:.25rem}@media (min-width: 600px){.filters[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 992px){.filters[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.excuse-text[_ngcontent-%COMP%]{margin:2rem 0;font-size:1.25rem;text-align:center;color:#aaa}"],changeDetection:0})};export{X as CocktailListComponent};
